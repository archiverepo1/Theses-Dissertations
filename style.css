:root{
  --blue:#072b57;--link:#005fcc;--muted:#6b7280;--line:#e5e7eb;--bg:#f6f8fa;
}
*{box-sizing:border-box}
body{font-family:Inter,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;margin:0;background:var(--bg);color:#222}

/* ===== HERO ===== */
header{position:relative;text-align:center;color:#fff;background:var(--blue);overflow:hidden}
#heroBg{position:absolute;inset:0;width:100%;height:260px;z-index:0}
.hero-text{position:relative;z-index:1;padding:80px 0 50px}
.hero-text h1{margin:0 0 8px;font-size:2.3rem;font-weight:800}
.hero-text p{margin:0;color:#dce8f6}

/* ===== FILTERS ===== */
.controls{background:#fff;border-bottom:1px solid var(--line);padding:1rem 1.25rem}
.filters{display:flex;flex-wrap:wrap;gap:1rem;align-items:center;justify-content:center}
label{font-weight:600}
select,input,.dropdown-trigger{font-size:.95rem;padding:.45rem .6rem;border:1px solid #ccc;border-radius:6px;min-width:190px;background:#fff}
.dropdown-trigger{cursor:pointer}
.note{font-size:.85rem;color:var(--muted)}

/* ===== INSTITUTION PANEL ===== */
.inst-panel{position:fixed;top:80px;left:50%;transform:translateX(-50%);
width:min(840px,92vw);background:#fff;border:1px solid var(--line);border-radius:12px;
box-shadow:0 10px 30px rgba(0,0,0,.12);z-index:20}
.hidden{display:none}
.inst-panel-head{display:flex;justify-content:space-between;align-items:center;
padding:.75rem 1rem;border-bottom:1px solid var(--line)}
.xbtn{background:none;border:none;font-size:18px;cursor:pointer}
.inst-panel-body{max-height:55vh;overflow:auto;padding:.5rem 1rem;
display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:.6rem}
.inst-row{display:flex;gap:.6rem;align-items:flex-start;padding:.5rem;border:1px solid #eef2f7;
border-radius:10px;background:#fafcff}
.inst-panel-foot{display:flex;justify-content:space-between;padding:.75rem 1rem;border-top:1px solid var(--line)}
.primary{background:var(--link);color:#fff;border:none;border-radius:8px;padding:.5rem .9rem;cursor:pointer}
.ghost{background:#eef2f7;border:none;border-radius:8px;padding:.5rem .9rem;cursor:pointer}

/* ===== INSTITUTION GRID ===== */
.inst-grid{max-width:1200px;margin:16px auto;padding:0 20px;
display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:14px}
.inst-card{background:#fff;border:1px solid #e3e7ea;border-radius:14px;padding:14px;
display:flex;align-items:center;gap:12px;box-shadow:0 1px 2px rgba(0,0,0,.05);
cursor:pointer;transition:.25s}
.inst-card:hover{transform:translateY(-3px);border-color:#c6d9f3;box-shadow:0 6px 18px rgba(0,80,160,.08)}
.inst-logo{width:52px;height:52px;object-fit:contain}
.inst-meta{display:flex;flex-direction:column}
.inst-name{font-weight:700;color:#0b2450}
.inst-sub{font-size:.85rem;color:var(--muted)}
.ribbon{margin-left:auto;font-size:.7rem;padding:3px 6px;border-radius:999px}
.ribbon.ok{background:#e6fbe9;color:#116329;border:1px solid #c7f0ce}
.ribbon.down{background:#fee2e2;color:#7f1d1d;border:1px solid #fecaca}
.inst-card.offline{opacity:.45;pointer-events:auto;filter:grayscale(90%)}
.inst-card.offline .inst-logo{animation:pulse 2.5s infinite;opacity:.7}
@keyframes pulse{0%,100%{transform:scale(1);opacity:.7}50%{transform:scale(1.08);opacity:.9}}

/* ===== TOOLTIP (hover + tap) ===== */
.inst-card.offline{position:relative;touch-action:manipulation}
.inst-card.offline::after{
  content:attr(data-tooltip);position:absolute;bottom:110%;left:50%;
  transform:translateX(-50%);background:#1e293b;color:#fff;font-size:.75rem;
  padding:6px 10px;border-radius:6px;white-space:nowrap;opacity:0;
  pointer-events:none;transition:opacity .25s;box-shadow:0 2px 8px rgba(0,0,0,.25);z-index:100;
}
.inst-card.offline:hover::after,
.inst-card.offline.show-tip::after{opacity:1}

/* ===== RESULTS GRID ===== */
#results{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));
gap:1.2rem;padding:1.4rem 2rem;max-width:1200px;margin:0 auto}
.loading{text-align:center;color:#555;display:flex;flex-direction:column;align-items:center;gap:.8rem;margin:2rem auto}
.spinner{width:42px;height:42px;border:4px solid #cfe2ff;border-top-color:var(--link);border-radius:50%;animation:spin .9s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.card{background:#fff;border:1px solid #e3e7ea;border-radius:14px;padding:1rem 1.1rem;
box-shadow:0 1px 2px rgba(0,0,0,.05);transition:.25s}
.card:hover{transform:translateY(-3px);border-color:#c6d9f3;box-shadow:0 6px 18px rgba(0,80,160,.08)}
.source-tag{display:inline-block;background:#eff6ff;color:var(--link);font-size:.75rem;
font-weight:700;border-radius:5px;padding:3px 8px;margin-bottom:.6rem}
h3{font-size:1.02rem;margin:.2rem 0 .45rem;color:#072b57}
.meta{font-size:.85rem;color:#586069;margin-bottom:.35rem}
.badge{display:inline-block;font-size:.72rem;background:#f1f5f9;color:#334155;border:1px solid #e2e8f0;border-radius:999px;padding:2px 8px;margin:2px 4px 0 0}
.card a{color:var(--link);font-weight:700;text-decoration:none}
.card a:hover{text-decoration:underline}

/* ===== PAGINATION + FOOTER ===== */
.pagination{text-align:center;background:#fff;border-top:1px solid var(--line);padding:1rem}
.pagination.hidden{display:none}
.pagination button{background:var(--link);color:#fff;border:none;border-radius:6px;padding:6px 12px;margin:0 8px;cursor:pointer}
footer{text-align:center;color:var(--muted);font-size:.85rem;padding:1.5rem;background:#f8f9fa;border-top:1px solid var(--line)}
@media(max-width:900px){.filters{flex-direction:column}.inst-panel-body{grid-template-columns:1fr}}
